
-- DlxUI Library Funcional - Loadstring Ready
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Criando GUI principal
local DlxUI = Instance.new("ScreenGui", PlayerGui)
DlxUI.Name = "DlxUI"
DlxUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Painel
local Painel = Instance.new("Frame", DlxUI)
Painel.Name = "Painel"
Painel.Size = UDim2.new(0, 164, 0, 192)
Painel.Position = UDim2.new(0, 22, 0, 6)
Painel.BackgroundTransparency = 1
local PainelCorner = Instance.new("UICorner", Painel)

-- Título
local Title = Instance.new("TextButton", Painel)
Title.Name = "Title"
Title.Size = UDim2.new(0, 162, 0, 14)
Title.Position = UDim2.new(0, 0, 0, 12)
Title.BackgroundColor3 = Color3.fromRGB(0,0,0)
Title.BackgroundTransparency = 0.5
Title.Text = "Sistema de UI Library"
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.TextScaled = true
local TitleStroke = Instance.new("UIStroke", Title)
TitleStroke.Thickness = 5
TitleStroke.Transparency = 0.4

-- Home Frame
local Home = Instance.new("Frame", Painel)
Home.Name = "Home"
Home.Size = UDim2.new(0, 162, 0, 152)
Home.Position = UDim2.new(0,0,0,36)
Home.BackgroundColor3 = Color3.fromRGB(0,0,0)
Home.BackgroundTransparency = 0.5
local HomeStroke = Instance.new("UIStroke", Home)
HomeStroke.Thickness = 5
HomeStroke.Transparency = 0.4

-- SectionLabel
local SectionLabel = Instance.new("TextLabel", Home)
SectionLabel.Name = "SectionLabel"
SectionLabel.Size = UDim2.new(0, 162, 0, 12)
SectionLabel.Position = UDim2.new(0,0,0,0)
SectionLabel.Text = "Section"
SectionLabel.TextColor3 = Color3.fromRGB(255,255,255)
SectionLabel.BackgroundTransparency = 1
SectionLabel.Font = Enum.Font.Gotham
SectionLabel.TextScaled = true

-- Função para criar botão normal
local function CreateButton(name, callback)
    local btn = Instance.new("TextButton", Home)
    btn.Name = name
    btn.Size = UDim2.new(0,162,0,30)
    btn.Position = UDim2.new(0,0,0,#Home:GetChildren()*32) -- empilha automático
    btn.BackgroundColor3 = Color3.fromRGB(0,0,0)
    btn.BackgroundTransparency = 0.8
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = name
    btn.TextScaled = true
    local stroke = Instance.new("UIStroke", btn)
    stroke.Transparency = 0.6
    btn.MouseButton1Click:Connect(callback)
    return btn
end

-- Função para criar toggle
local function CreateToggle(name, default, callback)
    local btnToggle = Instance.new("TextButton", Home)
    btnToggle.Name = name
    btnToggle.Size = UDim2.new(0,162,0,30)
    btnToggle.Position = UDim2.new(0,0,0,#Home:GetChildren()*32)
    btnToggle.BackgroundColor3 = Color3.fromRGB(0,0,0)
    btnToggle.BackgroundTransparency = 0.8
    btnToggle.TextColor3 = Color3.fromRGB(255,255,255)
    btnToggle.Text = name
    btnToggle.TextScaled = true
    local stroke = Instance.new("UIStroke", btnToggle)
    stroke.Transparency = 0.6

    local toggle = Instance.new("TextButton", btnToggle)
    toggle.Name = "Toggle"
    toggle.Size = UDim2.new(0,30,0,30)
    toggle.Position = UDim2.new(0,132,0,0)
    toggle.BackgroundColor3 = default and Color3.fromRGB(255,255,255) or Color3.fromRGB(117,117,117)
    toggle.Text = ""

    local state = default
    local function Update()
        toggle.BackgroundColor3 = state and Color3.fromRGB(255,255,255) or Color3.fromRGB(117,117,117)
        callback(state)
    end

    btnToggle.MouseButton1Click:Connect(function()
        state = not state
        Update()
    end)
    toggle.MouseButton1Click:Connect(function()
        state = not state
        Update()
    end)

    return btnToggle
end

-- Função para criar slider genérico
local function CreateSlider(name, min, max, default, callback)
    local frame = Instance.new("Frame", Home)
    frame.Name = name
    frame.Size = UDim2.new(0,162,0,44)
    frame.Position = UDim2.new(0,0,0,#Home:GetChildren()*32)
    frame.BackgroundColor3 = Color3.fromRGB(0,0,0)
    frame.BackgroundTransparency = 0.8
    local stroke = Instance.new("UIStroke", frame)
    stroke.Transparency = 0.5

    local label = Instance.new("TextLabel", frame)
    label.Name = "Title"
    label.Size = UDim2.new(0,162,0,16)
    label.Position = UDim2.new(0,0,0,0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255,255,255)
    label.TextScaled = true
    label.Text = name
    label.Font = Enum.Font.Gotham

    local Area = Instance.new("Frame", frame)
    Area.Name = "Area"
    Area.Size = UDim2.new(0,162,0,2)
    Area.Position = UDim2.new(0,0,0,30)
    Area.BackgroundColor3 = Color3.fromRGB(255,255,255)

    local Touch = Instance.new("TextButton", frame)
    Touch.Name = "Touch"
    Touch.Size = UDim2.new(0,8,0,14)
    Touch.Position = UDim2.new(0, (default-min)/(max-min)*162,0,24)
    Touch.BackgroundColor3 = Color3.fromRGB(255,255,255)
    Touch.BorderSizePixel = 0
    Touch.Text = ""

    local dragging = false
    local function UpdateSlider(x)
        local pos = math.clamp(x - Area.AbsolutePosition.X, 0, Area.AbsoluteSize.X)
        Touch.Position = UDim2.new(0,pos,0,24)
        local value = min + (pos/Area.AbsoluteSize.X)*(max-min)
        callback(value)
    end

    Touch.MouseButton1Down:Connect(function()
        dragging = true
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            UpdateSlider(input.Position.X)
        end
    end)

    return frame
end

--[[ ====== Modo de uso ====== ]]--

-- Exemplo botão normal
CreateButton("Executar Script", function()
    print("Botão clicado!")
    -- Coloque aqui qualquer script que você queira executar
end)

-- Exemplo toggle
CreateToggle("Auto Kill", false, function(state)
    print("Auto Kill ativo?", state)
    -- Coloque aqui seu loop ou script que fica ativo enquanto toggle estiver true
end)

-- Exemplo slider
CreateSlider("Velocidade", 16, 200, 16, function(value)
    print("Velocidade atual:", value)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = value
    end
end)

return DlxUI
